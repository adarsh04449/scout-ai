# 1) MARKET RESEARCH (Detailed but Efficient)
research_task:
  description: >
    Conduct comprehensive market research for "{startup_idea}" in the {topic} sector.
    Use 3-4 strategic web searches to get detailed insights. Define the market thoroughly,
    identify top 5 competitors with detailed analysis, capture key trends, and get reliable market size data.
    Use scrape tool ONLY for 1-2 key competitor websites if you need in-depth details.
    Be thorough but structured—aim for quality insights, not just bullet points.
  expected_output: >
    Detailed Markdown report:
    
    ## Market Overview (150-200 words)
    - Comprehensive definition of the market: what it is, who the buyers are, main use cases
    - Market size and growth trajectory (specific numbers with source [1])
    - Key market dynamics and structure
    
    ## Competitive Landscape (200-250 words)
    - Competitive positioning summary (2-3 paragraphs)
    - Top 5 competitors with detailed analysis:
      • [Company Name](URL) - 2-3 sentences on positioning, pricing, key features, differentiation
      • [Company Name](URL) - 2-3 sentences on positioning, pricing, key features, differentiation
      • ... (repeat for all 5)
    
    ## Market Trends & Drivers (150-200 words)
    - 3-4 detailed bullets on key industry trends with analysis
    - Discussion of demand drivers and market inhibitors
    - Regulatory or technological factors shaping the market
    
    ## Opportunities & Risks (150 words)
    - Opportunities (2-3 detailed bullets with specific market gaps)
    - Risks (2-3 detailed bullets with specific threats or challenges)
    
    ## Sources (5-8 URLs)
    [1] Title — [URL](link) — Accessed: YYYY-MM-DD
    [2] Title — [URL](link) — Accessed: YYYY-MM-DD
    ...
  acceptance_criteria: >
    - Each section is detailed with multi-sentence paragraphs (not one-liners)
    - Competitor analysis includes specific positioning, pricing, and differentiation
    - Market size cites specific numbers with inline citations
    - All sections provide comprehensive insights
    - Total length: 650-800 words (excluding sources)
  agent: researcher
  inputs:
    startup_idea: "{startup_idea}"
    topic: "{topic}"

# 2) FORECAST (Detailed Assumptions)
forecast_task:
  description: >
    Using the comprehensive research insights, produce a realistic and data-driven 5-year growth forecast
    for "{startup_idea}". Base your projections on the market size, competitive landscape, and trends
    identified in the research. Provide detailed assumptions and reasoning for your forecast model.
    Express as VALID JSON for charting. Start from {start_year}.
  expected_output: >
    ## Forecast Assumptions (150-200 words)
    
    Detail your forecasting methodology:
    - Revenue model and pricing assumptions
    - Market penetration and adoption rates
    - Key assumptions about customer acquisition, retention, and growth drivers
    - Conservative vs. optimistic scenarios
    - Year-over-year growth rationale (why growth accelerates or decelerates)
    
    ## CHART DATA (REQUIRED - MUST BE VALID JSON):
    
    You MUST output a valid JSON object that can be directly used for charting. The JSON must follow this EXACT structure:
    
    ```json
    {
      "title": "5-Year Growth Forecast for {startup_idea}",
      "unit": "{unit}",
      "series": [
        { "year": {start_year}, "value": 100000 },
        { "year": {start_year+1}, "value": 250000 },
        { "year": {start_year+2}, "value": 500000 },
        { "year": {start_year+3}, "value": 850000 },
        { "year": {start_year+4}, "value": 1300000 }
      ],
      "scenarios": ["conservative", "optimistic"]
    }
    ```
    
    IMPORTANT: The JSON must be valid and parseable. Use numeric values only (no commas, no currency symbols, no % signs).
  acceptance_criteria: >
    - Assumptions are detailed and explain the reasoning for each year's growth
    - JSON parses without errors
    - Exactly 5 years from {start_year} to {start_year+4}
    - Values are numeric (no commas or currency symbols)
    - Growth trajectory is explained and justified
  agent: forecast_analyst
  inputs:
    startup_idea: "{startup_idea}"
    topic: "{topic}"
    start_year: "{start_year}"
    unit: "{unit}"

# 3) REPORT SYNTHESIS (Comprehensive Executive Summary)
synthesis_task:
  description: >
    Create a comprehensive executive summary combining research + forecast for "{startup_idea}".
    This should be a detailed, professional report suitable for investors or decision-makers.
    Preserve all URLs and citations from research. Expand on the insights—don't just summarize.
    Make it thorough and insightful while maintaining clarity and structure.
  expected_output: >
    Complete Executive Market Research Report:
    
    ## Executive Summary (200-250 words)
    - Comprehensive overview of the startup idea and its market positioning
    - Key findings and insights (4-5 paragraphs)
    - Market opportunity size and potential
    - Strategic implications for the startup
    
    ## Market Analysis (250-300 words)
    - Detailed market overview based on research
    - Market size, growth trends, and dynamics [1]
    - Target customer segments and buyer personas
    - Key industry trends and drivers shaping the market
    - Market structure and competitive dynamics
    
    ## Competitive Intelligence (250-300 words)
    - Summary of competitive landscape positioning
    - Detailed analysis of top 3-4 competitors with links: [Company Name](URL)
    - Each competitor's positioning, strengths, and differentiation
    - Market gaps and white space opportunities
    - Competitive advantages and challenges
    
    ## Growth Forecast & Strategy (200-250 words)
    - Summary of the 5-year forecast (reference JSON from forecast_task)
    - Detailed discussion of growth assumptions and rationale
    - Key milestones and inflection points
    - Strategic implications for go-to-market approach
    - Investment requirements and scaling considerations
    
    ## Strategic Recommendations (200 words)
    - Opportunities (3-4 detailed recommendations with specific actions)
    - Risks and mitigation strategies (3-4 detailed points)
    - Key success factors
    - Next steps and recommendations
    
    ## Sources & Citations
    [1] Title — [URL](link) — Accessed: YYYY-MM-DD
    [2] Title — [URL](link) — Accessed: YYYY-MM-DD
    ... (all sources from research)
    
  acceptance_criteria: >
    - Each section is comprehensive with detailed analysis (not summaries)
    - Total length: 1,100-1,400 words (excluding sources)
    - All URLs and citations preserved from research
    - Competitors listed with clickable markdown links
    - Forecast referenced with detailed explanation
    - Professional tone suitable for investor presentation
  agent: report_synthesizer
  inputs:
    startup_idea: "{startup_idea}"
    topic: "{topic}"

